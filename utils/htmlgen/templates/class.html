{% extends "base.html" %}
{% block head %}
<style>
    body {
        font-family: Roboto, Helvetica, sans-serif;
    }
    h1 {
        font-size: 36px;
        font-weight: 780;
    }

    table {
        border-collapse: collapse;
        border-top: 1px solid #7a7971;
        border-bottom: 1px solid #7a7971;
    }

    table caption {
        font-weight: bold;
        font-variant: small-caps;
    }

    table tr:nth-child(even) {
        background-color: #f1ebe8;
    }

    table tr:nth-child(odd) {
        background-color: #f8f4f1;
    }

    table thead tr:nth-child(even) {
        background: unset;
    }
    table thead tr:nth-child(odd) {
        background: unset;
    }

    table thead {
        background: linear-gradient(to right, #401f25, #741b2b);
        color: #fff;
        text-align: center;
        font-weight: bold;
        font-variant: small-caps;
    }

    table thead th {
        padding: 5px;
    }

    .class-core-traits th {
        text-align: start;
    }

    section.secret {
        display: none;
    }

    .class-feature h3 {
        font-weight: bold;
        border-block-end: 1px solid #782e22;
    }

    .features-table td:is(.level, .prof, .scale, .spell-slots){
        text-align: center;
    }
</style>
{% endblock %}

{% block body %}
<h1>{{ class.name }}</h1>
<table class="class-core-traits">
    <caption>Core {{ class.name }} Traits</caption>
    <tbody>
        <tr>
            <th>Primary Ability</th>
            <td>{{ class.primary_ability }}</td>
        </tr>
        <tr>
            <th>Hit Point Die</th>
            <td>{{ class.hit_point_die }}</td>
        </tr>
        <tr>
            <th>Saving Throw Proficiencies</th>
            <td>{{ class.saving_throws }}</td>
        </tr>
        <tr>
            <th>Skill Proficiencies</th>
            <td>Choose {{ class.skill_choice_count }} from {{class.skill_list }}</td>
        </tr>
        <tr>
            <th>Weapon Proficiencies</th>
            <td>{{class.weapon_profs }}</td>
        </tr>
        <tr>
            <th>Tool Proficiencies</th>
            <td>{{ class.tool_profs }}</td>
        </tr>
        <tr>
            <th>Armor Training</th>
            <td>{{ class.armor_training }}</td>
        </tr>
        <tr>
            <th>Starting Equipment</th>
            <td></td>
        </tr>
    </tbody>
</table>
<div class="class-table">
    <table class="features-table">
        <caption>{{ class.name }}</caption>
        <thead>
            {% if class.full_caster or class.half_caster %}
            <tr>
                <th rowspan="2">Level</th>
                <th rowspan="2">Proficiency Bonus</th>
                <th rowspan="2">Features</th>
                {% for scale_value in class.scale_values %}
                <th rowspan="2">{{ scale_value.name }}</th>
                {% endfor %}
                {% if class.half_caster %}
                <th colspan="5">--Spell Slots per Spell Level--</th>
                {% else %}
                <th colspan="9">--Spell Slots per Spell Level--</th>
                {% endif %}
            </tr>
            <tr>
                <th>1st</th>
                <th>2nd</th>
                <th>3rd</th>
                <th>4th</th>
                <th>5th</th>
                {% if class.full_caster %}
                <th>6th</th>
                <th>7th</th>
                <th>8th</th>
                <th>9th</th>
                {% endif %}
            </tr>
            {% else %}
            <tr>
                <th>Level</th>
                <th>Proficiency Bonus</th>
                <th>Features</th>
                {% for scale_value in class.scale_values %}
                <th>{{ scale_value.name }}</th>
                {% endfor %}
            </tr>
            {% endif %}
        </thead>
        <tbody>
            {% for level in range(1, 21) %}
            <tr>
                <td class="level">{{ level }}</td>
                <td class="prof"> {{ class.prof[level] }}</td>
                <td>
                    {% if level in class.asi_levels %}
                    Ability Score Improvement{{ ", " if class.features_by_level[level] else "" }}
                    {% endif %}
                    {% for feature in class.features_by_level[level] %}
                    <a href="#{{ feature.slug }}">{{ feature.name }}</a>{{ ", " if not loop.last else "" }}
                    {% endfor %}
                </td>
                {% for scale_value in class.scale_values %}
                <td class="scale">{{ scale_value[level] }}</td>
                {% endfor %}
                {% if class.half_caster %}
                {% for slots in class.half_caster_slots[level] %}
                <td class="spell-slots">{{ slots }}</td>
                {% endfor %}
                {% elif class.full_caster %}
                {% for slots in class.full_caster_slots[level] %}
                <td class="spell-slots">{{ slots }}</td>
                {% endfor %}
                {% endif %} 
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<h2>Class Features</h2>
{% for feature in class.features %}
<div class="class-feature">
    <h3 id="{{ feature.slug }}">Level {{ feature.level }}: {{ feature.name }}</h3>
    <p>
        {{ feature.description|safe }}
    </p>
</div>
{% endfor %}
{% endblock %}